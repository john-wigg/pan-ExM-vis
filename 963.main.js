onmessage=function(r){for(var e=new Uint8Array(r.data[0]),a=r.data[1],n=new Array,t=0;t<a;++t){var o=new Uint8Array(r.data[2+t]);if(o.length!=e.length)return void console.error("Size mismatch between SDF and protein volumes.");for(var s=new Float32Array(256),h=new Float32Array(256),u=0;u<o.length;++u)s[o[u]]+=e[u],h[o[u]]+=1;for(u=0;u<s.length;++u)s[u]=s[u]/h[u];n.push(s)}var f=new Array,p=new Array;for(p.push("complete"),p.push(n),p.push(e.buffer),f.push(e.buffer),t=0;t<a;++t)f.push(r.data[2+t]),p.push(r.data[2+t]);postMessage(p,f)};